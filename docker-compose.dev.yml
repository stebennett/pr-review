# Development overrides - enables hot reload for all services
# Usage: docker compose -f docker-compose.yml -f docker-compose.dev.yml up

services:
  web-fe:
    build:
      context: ./apps/web-fe
      dockerfile: Dockerfile
      target: builder
    command: npm run dev -- --host 0.0.0.0
    ports:
      - "5173:5173"
    volumes:
      - ./apps/web-fe/src:/app/src
      - ./apps/web-fe/index.html:/app/index.html
    environment:
      - VITE_API_URL=${VITE_API_URL:-http://localhost:8000}

  web-be:
    build:
      context: .
      dockerfile: apps/web-be/Dockerfile
      target: builder
    command: uvicorn pr_review_api.main:app --host 0.0.0.0 --port 8000 --reload
    volumes:
      - ./apps/web-be/src:/app/src
      - ./data:/app/data
    environment:
      - PYTHONPATH=/app/src

  scheduler:
    build:
      context: .
      dockerfile: apps/scheduler/Dockerfile
      target: builder
    volumes:
      - ./apps/scheduler/src:/app/src
      - ./data:/app/data
    environment:
      - PYTHONPATH=/app/src
